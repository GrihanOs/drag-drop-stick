<html>

<head>
	<title>Div Mover</title>
	<style>
		.container {
			background-color: lightgreen;
			position: absolute;
			width: 100%;
			height: 100%;
			top: 0;
			left: 0;
		}

		.moved {
			width: 300px;
			height: 100px;
			background-color: lightcoral;
			border: 1px solid coral;
			position: absolute;
		}

		#moved-1 {
			left: 600px;
			top: 600px;
		}
	</style>
	<script>

		const directionKeys = {
			UP: 38,
			DOWN: 40,
			LEFT: 37,
			RIGHT: 39,
		}

		const SPEED = 5;

		let verticalMove = false;
		let verticalMoveDiff = 0;

		let horizontalMove = false;
		let horizontalMoveDiff = 0;

		function initialize() {

			window.addEventListener("keydown", (keyEvent) => {

				if (keyEvent.keyCode >= 37 &&
					keyEvent.keyCode <= 40) {
					moveStart(keyEvent.keyCode);
				}

			});

			window.addEventListener("keyup", (keyEvent) => {

				if (keyEvent.keyCode >= 37 &&
					keyEvent.keyCode <= 40) {
					moveStop(keyEvent.keyCode);
				}

			});

			requestAnimationFrame(doMove)
		}

		function moveStart(directionKey) {

			if (directionKey === directionKeys.UP ||
				directionKey === directionKeys.DOWN) {

				verticalMove = true;

				if (directionKey === directionKeys.UP) {
					verticalMoveDiff = -1;
				} else {
					verticalMoveDiff = 1;
				}

			}

			if (directionKey === directionKeys.LEFT ||
				directionKey === directionKeys.RIGHT) {

				horizontalMove = true;

				if (directionKey === directionKeys.LEFT) {
					horizontalMoveDiff = -1;
				} else {
					horizontalMoveDiff = 1;
				}

			}
		}

		function moveStop(directionKey) {

			if (directionKey === directionKeys.UP ||
				directionKey === directionKeys.DOWN) {

				verticalMove = false;
				verticalMoveDiff = 0;

			}

			if (directionKey === directionKeys.LEFT ||
				directionKey === directionKeys.RIGHT) {

				horizontalMove = false;
				horizontalMoveDiff = 0;

			}

		}

		function doMove() {

			if (verticalMove || horizontalMove) {

				const moved1 = document.getElementById("moved-1");
				const clientRect = moved1.getBoundingClientRect();

				const newLeft = clientRect.left + horizontalMoveDiff * SPEED;
				const newTop = clientRect.top + verticalMoveDiff * SPEED;

				moved1.style.left = `${newLeft}px`;
				moved1.style.top = `${newTop}px`;
			}

			requestAnimationFrame(doMove);
		}

	</script>
</head>

<body onload="initialize()">
	<div class="container">
		<div class="moved" id="moved-1">
		</div>
	</div>
</body>

</html>